version: 2

config:
  log_level: INFO
  output_dir: ${OUTPUT_DIR} # this will be a parameter that is passed through from the command line, leave this as-is
  memory_limit: 1GB
  state_file: ${STATE_FILE}
  tmp_dir: ${TMP_DIR}
  show_graph: False
  parameter_defaults:
    OUTPUT_DIR: ./output
    TMP_DIR: /tmp
    STATE_FILE: ./runs.csv
    STUDENT_ID_NAME: 'edFi_studentUniqueID' # default to the column added by the apply_xwalk package of student ID xwalking feature
    POSSIBLE_STUDENT_ID_COLUMNS: 'UniqueDRCStudentID,StateStudentID,DistrictStudentID'
    ALTERNATE: ''

packages:
  {% if ${SCHOOL_YEAR}|int <= 2021 %}
  {% set format = "pre_2021" %}
  pre_2021:
    local: formats/pre_2021
  {% elif ${SCHOOL_YEAR}|int > 2021 %}
  {% set format = "post_2021" %}
  post_2021:
    local: formats/post_2021
  {% endif %}

destinations:
  assessments:
    source: $transformations.assessments
    template: ./templates/assessments.jsont
    extension: jsonl
  objectiveAssessments:
    source: $sources.objectiveAssessments
    template: ./templates/objectiveAssessments.jsont
    extension: jsonl
  studentAssessments:
    source: $transformations.results
    template: ./templates/studentAssessments.jsont
    extension: jsonl
  accommodationDescriptors:
    source: $sources.accommodationDescriptors
    template: ./templates/descriptors.jsont
    extension: jsonl
  administrationEnvironmentDescriptors:
    source: $sources.administrationEnvironmentDescriptors
    template: ./templates/descriptors.jsont
    extension: jsonl
  assessmentReportingMethodDescriptors:
    source: $sources.assessmentReportingMethodDescriptors
    template: ./templates/descriptors.jsont
    extension: jsonl
  performanceLevelDescriptors:
    source: $sources.performanceLevelDescriptors
    template: ./templates/descriptors.jsont
    extension: jsonl
  reasonNotTestedDescriptors:
    source: $sources.reasonNotTestedDescriptors
    template: ./templates/descriptors.jsont
    extension: jsonl