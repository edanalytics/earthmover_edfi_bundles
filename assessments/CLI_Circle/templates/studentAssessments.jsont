[
    "studentAssessmentIdentifier": "{{ student_wave_id }}__{{ subject_name }}",
    "assessmentReference": {
      "assessmentIdentifier": "cli_circle",
      "namespace": "uri://www.cli.org/circle/Assessment"
    },
    "schoolYearTypeReference": {
      "schoolYear": {{ school_year }}
    },
    "studentReference": {
      "studentUniqueId": "{{ local_student_id }}"
    },
    "administrationDate": "{{ subject_date }}",
    "performanceLevels": [
      {
        "assessmentReportingMethodDescriptor": "uri://www.cli.org/circle/AssessmentReportingMethodDescriptor#Overall Performance Level",
        "resultDatatypeTypeDescriptor":"uri://ed-fi.org/ResultDatatypeTypeDescriptor#Level",
        "performanceLevelDescriptor": "uri://ed-fi.org/ResultDatatypeTypeDescriptor#{{ subject_performance }}"
      }
    ],
    "scoreResults": [
      {
        "assessmentReportingMethodDescriptor": "uri://www.cli.org/circle/AssessmentReportingMethodDescriptor#{{ subject_descriptor }}",
        "resultDatatypeTypeDescriptor": "uri://ed-fi.org/ResultDatatypeTypeDescriptor#Integer",
        "result": "{{ subject_score }}"
      },
      {
        "assessmentReportingMethodDescriptor": "uri://www.cli.org/circle/AssessmentReportingMethodDescriptor#Subject",
        "resultDatatypeTypeDescriptor": "uri://ed-fi.org/ResultDatatypeTypeDescriptor#Level",
        "result": "{{ subject_name }}"
      }
      {% if subject_set_score is not none and subject_set_score | length %}
      ,
      {
        "assessmentReportingMethodDescriptor": "uri://www.cli.org/circle/AssessmentReportingMethodDescriptor#Set",
        "resultDatatypeTypeDescriptor": "uri://ed-fi.org/ResultDatatypeTypeDescriptor#Level",
        "result": "{{ subject_set }}"
      }
      {% endif %}
    ]
        
    "studentObjectiveAssessments": [
      {%- for n in range(1,7) -%}
      
        {% set objective_assessment_name = self._TemplateReference__context.resolve('oa_category_'~n~'_name')%}
        {% set objective_assessment_descriptor = self._TemplateReference__context.resolve('oa_category_'~n~'_descriptor')%}
        {% set objective_assessment_date = self._TemplateReference__context.resolve('oa_category_'~n~'_date')%}
        {% set objective_assessment_score = self._TemplateReference__context.resolve('oa_category_'~n~'_score')%}
        {% set objective_assessment_performance = self._TemplateReference__context.resolve('oa_category_'~n~'_performance')%}

        {% if objective_assessment_score is not none and objective_assessment_score | length %}
          {%- if not loop.first -%},{% endif %}
        {
          "administrationDate": "{{ objective_assessment_date }}",
          "objectiveAssessmentReference": {
            "assessmentIdentifier": "cli_circle",
            "identificationCode": "{{ subject_name }}"
            "namespace": "uri://www.cli.org/circle/Assessment"
          },          
          "performanceLevels": [
            {
              "assessmentReportingMethodDescriptor": "uri://www.cli.org/circle/AssessmentReportingMethodDescriptor#Overall Performance Level",
              "resultDatatypeTypeDescriptor":"uri://ed-fi.org/ResultDatatypeTypeDescriptor#Level",
              "performanceLevelDescriptor": "uri://ed-fi.org/ResultDatatypeTypeDescriptor#{{ objective_assessment_performance }}"
            }
          ],
          "scoreResults": [
            {
              "assessmentReportingMethodDescriptor": "uri://www.cli.org/circle/AssessmentReportingMethodDescriptor#{{ objective_assessment_descriptor }}",
              "resultDatatypeTypeDescriptor":"uri://ed-fi.org/ResultDatatypeTypeDescriptor#Integer",
              "result": "{{ objective_assessment_score }}"
            },
            {
              "assessmentReportingMethodDescriptor": "uri://www.cli.org/circle/AssessmentReportingMethodDescriptor#Subject",
              "resultDatatypeTypeDescriptor": "uri://ed-fi.org/ResultDatatypeTypeDescriptor#Level",
              "result": "{{ objective_assessment_name }}"
            }
          ]
        }
        {% endif %}
      {% endfor %}
    ],
]